{% extends 'base/base.html' %}
{% block title %}{{ student.full_name }}{% endblock %}
{% block content %}

<div class="page-header">
    <div>
        <div class="page-title">{{ student.full_name }}</div>
        <div class="page-subtitle">{{ student.group.name }}</div>
    </div>
    <div style="display:flex;gap:0.5rem;">
        <a href="/students/{{ student.pk }}/edit/" class="btn btn-outline btn-sm">Tahrirlash</a>
        <a href="/groups/{{ student.group.pk }}/" class="btn btn-primary btn-sm">â† Guruhga qaytish</a>
    </div>
</div>

<!-- Progress card -->
<div class="card" style="margin-bottom:2rem;">
    <div class="card-header">Umumiy natija</div>
    <div class="card-body">
        <div style="display:flex;align-items:center;gap:2rem;flex-wrap:wrap;">
            <div style="text-align:center;">
                <div style="font-family:'Playfair Display',serif;font-size:3rem;color:var(--primary);font-weight:700;line-height:1;">{{ completed }}</div>
                <div style="font-size:0.8rem;text-transform:uppercase;letter-spacing:0.1em;color:var(--text-muted);">Bajarilgan</div>
            </div>
            <div style="text-align:center;">
                <div style="font-family:'Playfair Display',serif;font-size:3rem;color:var(--text-muted);font-weight:700;line-height:1;">{{ total }}</div>
                <div style="font-size:0.8rem;text-transform:uppercase;letter-spacing:0.1em;color:var(--text-muted);">Jami</div>
            </div>
            <div style="flex:1;min-width:200px;">
                <div style="font-size:0.85rem;color:var(--text-muted);margin-bottom:0.5rem;">{{ progress }}% bajarildi</div>
                <div class="progress-bar-wrap" style="height:12px;">
                    <div class="progress-bar-fill {% if progress == 100 %}full{% endif %}" style="width:{{ progress }}%;"></div>
                </div>
                {% if progress == 100 %}
                <div style="color:var(--success);font-weight:700;margin-top:0.5rem;font-size:0.9rem;">ğŸ† Barcha vazifalarni bajardi!</div>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<!-- Tasks grid -->
<div class="card">
    <div class="card-header">Vazifalar holati</div>
    <div class="card-body">
        <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(60px,1fr));gap:0.6rem;">
            {% for task in tasks %}
            <div style="text-align:center;padding:0.5rem;border-radius:6px;border:1.5px solid {% if task.completed %}var(--success){% else %}var(--border){% endif %};background:{% if task.completed %}var(--success-light){% else %}var(--bg-white){% endif %};">
                <div style="font-weight:700;font-size:0.75rem;color:{% if task.completed %}var(--success){% else %}var(--text-muted){% endif %};">{{ task.task_number }}</div>
                <div style="font-size:0.9rem;">{% if task.completed %}âœ“{% else %}Â·{% endif %}</div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

{% endblock %}
